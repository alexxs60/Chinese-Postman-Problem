\# ChinesePostmanProblem - 中国邮路问题求解系统 (C++ 课程设计)



一个基于 \*\*C++\*\* 的中国邮路问题（Chinese Postman Problem）求解程序，用于在连通无向加权图中找到遍历每条边至少一次的最短闭合回路。



\## 项目亮点



\- \*\*完整图论算法实现\*\*：Floyd-Warshall + 最小完美匹配 + Hierholzer 欧拉回路全流程

\- \*\*自动处理奇度节点\*\*：递归求最小权重完美匹配，自动添加重复边使图变为欧拉图

\- \*\*支持多重边\*\*：使用 `multiset` 高效处理重复遍历的边

\- \*\*路径完整性验证\*\*：检查欧拉路径是否覆盖所有原边 + 添加边

\- \*\*连通性检查\*\*：Floyd-Warshall 后自动检测图是否连通

\- \*\*输入灵活\*\*：支持键盘手动输入 + 文件批量输入

\- \*\*性能统计\*\*：记录算法运行时间，便于测试与分析



\## 技术栈



\- \*\*C++11\*\*（兼容大多数编译器）

\- \*\*STL\*\*：`vector`、`stack`、`multiset`、`algorithm`、`chrono`、`fstream`

\- \*\*图算法\*\*：

&nbsp; - Floyd-Warshall（所有点对最短路径 + 路径重构）

&nbsp; - 递归最小完美匹配（奇度节点配对）

&nbsp; - Hierholzer 算法（高效求欧拉回路）

\- \*\*数据结构\*\*：邻接矩阵（权重存储）、`multiset`（多重边处理）、父指针路径重构

\- \*\*文件 I/O\*\*：支持从文件读取图数据

\- \*\*边界与异常处理\*\*：奇度节点数奇数检查、图不连通提示、路径不存在处理



\## 主要功能



\- \*\*图输入\*\*：键盘逐条输入或从文件一次性读取节点数、边数、起始节点及边列表

\- \*\*奇度节点检测\*\*：自动找出所有度数为奇的节点

\- \*\*最小匹配计算\*\*：递归枚举求奇度节点间的最小权重完美匹配

\- \*\*重复边添加\*\*：根据匹配结果添加对应最短路径上的重复边

\- \*\*欧拉回路求解\*\*：从指定起始节点开始，使用 Hierholzer 算法遍历所有边

\- \*\*输出结果\*\*：最佳投递路线（节点序列）、总路程、额外添加成本、遍历边数统计

\- \*\*连通性与完整性验证\*\*：提示图不连通或路径不完整的情况

\- \*\*性能计时\*\*：记录整个求解过程耗时（毫秒级）



\## 项目结构

Chinese-Postman-Problem/

├── main.cpp                # 主程序入口 + 输入选择 + 输出逻辑

├── test1.txt               # 测试用例1：全偶度节点（无需添加边）

├── test2.txt               # 测试用例2：4个奇度节点（直接边匹配）

├── test3.txt               # 测试用例3：4个奇度节点（最短路径多段添加）

└── README.md               # 本说明文件

text## 编译与运行



\### 编译命令

```bash

\# 推荐（C++11 标准）

g++ -std=c++11 main.cpp -o chinese\_postman



\# 优化版（更快）

g++ -std=c++11 -O2 main.cpp -o chinese\_postman

运行

Bash./chinese\_postman          # Linux / Mac

chinese\_postman.exe        # Windows

程序启动后选择：



文件输入（推荐，输入 test\*.txt 文件名）

键盘输入（手动输入节点数、边数、边信息）



测试用例



































































文件名描述奇度节点数预期总路程备注test1.txt所有节点度数均为偶数028直接欧拉回路test2.txt4 个奇度节点442需要添加最小匹配test3.txt4 个奇度节点（路径匹配）414包含最短路径的多段添加

示例 test1.txt 内容：

text4 4 0

0 1 4

1 2 6

2 3 8

3 0 10

注意事项



节点编号从 0 开始

图必须 连通，否则程序会提示无法求解

奇度节点数量必须为 偶数（图论性质），否则匹配失败

奇度节点过多（>12 个）时递归匹配较慢，适合课程设计小规模数据

权重建议为正整数（负权未测试）

输出路线可能因 multiset 邻接选择顺序不同而有多种等价解，但 总路程固定正确



作者



Display Name：kira

完成时间：2026年

课程设计用途：图论 / 算法设计课程项目



欢迎 Star / Fork / 提 Issue！

text

